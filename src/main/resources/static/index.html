<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html lang="HTML">
<head>
    <meta http-equiv = "Content-Type" content = "text/html; charset=utf-8">
    <title>Каталог книг</title>
    <style type="text/css" >
        .stmenu {
            border: 3px solid #666; /* Параметры рамки */
            border-radius: 5px;
            background: #fd0; /* Цвет фона */
            padding: 5px; /* Поля вокруг текста */
            margin: 10px; /* Отступы вокруг */
        }
    </style>

    <script language="JavaScript" type="text/javascript">
        <!--
        const URLserver="Http://localhost:8080";
        function f_go(subpage)
        {
            switch (subpage)
                {
                case 1:
                    document.getElementById("subpage1").style.display="block";
                    document.getElementById("subpage2").style.display="none";
                    document.getElementById("subpage3").style.display="none";
                    document.getElementById("subpage4").style.display="none";
                    break;
                case 2:
                    document.getElementById("subpage1").style.display="none";
                    document.getElementById("subpage2").style.display="block";
                    document.getElementById("subpage3").style.display="none";
                    document.getElementById("subpage4").style.display="none";
                    requestCatalog("","");
                    break;
                case 3:
                    document.getElementById("subpage1").style.display="none";
                    document.getElementById("subpage2").style.display="none";
                    document.getElementById("subpage3").style.display="block";
                    document.getElementById("subpage4").style.display="none";
                    break;
                case 4:
                    document.getElementById("subpage1").style.display="none";
                    document.getElementById("subpage2").style.display="none";
                    document.getElementById("subpage3").style.display="none";
                    document.getElementById("subpage4").style.display="block";
                }
        }

        function fpage_go(sidePage, idItem)
        {
                    requestCatalog(sidePage, idItem);
        }





        function requestCatalog(sidePage, idItem){
            //alert("собираюсь отправить запрос каталога");

            //let requestURL = 'Http://localhost:8080/catalog';
            let requestURL = URLserver+'/catalog'+'?sidePage='+sidePage+'&itemId='+idItem;
            let request = new XMLHttpRequest();
            request.open('GET', requestURL,true);
            request.onload = viewCatalog; //{

            //Для обхода кеширования страницы в браузере
            //request.open("GET", url + ((/\?/).test(url) ? "&" : "?") + (new Date()).getTime(), true);

            request.responseType = 'json';
            request.send();
        }


        function viewCatalog() {


            //alert("начинаю показ каталог ");

            let items = this.response;
            //alert("ответ XMLHttpRequest.response  :"+items.description);



            //html-opening всех элементов каталога
            let HTMLitems, HTMLitem, HTMLimages, HTMLimage;
            let images;
            let eltr,eltd;
            if (document.getElementById('iditemall')) {
                document.getElementById('iditemall').remove();
            }
            HTMLitems = document.createElement('div');
            HTMLitems.id = "iditemall";
            let elt = document.createElement('table');
            elt.id = "idtableitem";

            let d1 = document.getElementById('idTable');
            d1.insertAdjacentElement('beforeend', HTMLitems);


            //HTMLitems
            document.getElementById("iditemall")
                     .insertAdjacentElement('beforeend', elt);

            items.forEach(function (item,indexItem) {
                //элемент каталога
                //alert("_index_:" + indexItem + "; _item.toString()_:" + item.toString());
                //обрабатываем элемент каталога

                if (indexItem%3===0) {
                    eltr = document.createElement('tr');
                    eltr.id = 'triditem'+(Math.floor(indexItem/3));
                    document.getElementById("idtableitem")
                             .insertAdjacentElement('beforeend',eltr);
                }
                eltd = document.createElement('td');
                eltd.id = "tdiditem"+indexItem;
                //HTMLitems
                document.getElementById("triditem"+(Math.floor(indexItem/3)))
                        .insertAdjacentElement('beforeend', eltd);

                //html-opening элемента каталога

                HTMLitem = document.createElement('div');
                HTMLitem.id = "iditem"+indexItem;

                //html-opening всех изображений

                HTMLimages = document.createElement('div');
                //alert("_HTMLimages.toString()_ :"+HTMLimages.toString());
                //alert("удачно завершил document.createElement ");
                HTMLimages.id = "idimagesitemindex"+indexItem;
                HTMLimages.style.width = "110px";
                HTMLimages.style.height = "110px";
                HTMLimages.style.border = "1px";
                HTMLimages.style.borderColor = "black";

                images = item['listImages'];
                //alert("удачно завершил images=item[_listImages_]");
                images.forEach(function (image, indexImage) {
                    //обработка одного изображения
                    //alert("удачно завершил images.forEach");
                    //alert("_indexImage_:" + indexImage + " ;_image.toString()_:" + image.toString());
                    let imageId = image['imageId'];
                    //html-opening одного изображения

                    //html-ending одного изображения

                    let el = document.createElement('div');
                    el.id = "idimageindex"+indexItem+"i"+indexImage;
                    if (indexImage === 0) {el.style.display = "block"} else {el.style.display = "none"}
                    el.style.width = "100px";
                    el.style.height = "100px";
                    HTMLimage = el;

                    let elim = document.createElement('img');
                    elim.id = "idimageId"+imageId;
                    elim.src = URLserver+"/image?id="+imageId;
                    elim.style.width = "100px";
                    elim.style.height = "100px";
                    elim.alt = "Not picture";

                    HTMLimage.append(elim);
                    HTMLimages.append(HTMLimage);




                }); //конец обработки одного изображения
                //html-ending всех изображений

                HTMLitem.prepend(HTMLimages);

                //html-ending элемента каталога

                let elattr = document.createElement('div');
                let elbr = document.createElement('br');
                if (item['attr0']!==null) {elattr.append("АтрибутСтрока0:"+item['attr0'])}
                elattr.append(elbr.cloneNode());
                if (item['attr1']!==null) {elattr.append("АтрибутСтрока1:"+item['attr1'])}
                elattr.append(elbr.cloneNode());
                if (item['attr2']!==null) {elattr.append("АтрибутСтрока2:"+item['attr2'])}
                elattr.append(elbr.cloneNode());
                if (item['attr3']!==null) {elattr.append("АтрибутСтрока3:"+item['attr3'])}
                elattr.append(elbr.cloneNode());
                if (item['attr4']!==null) {elattr.append("АтрибутСтрока4:"+item['attr4'])}
                elattr.append(elbr.cloneNode());
                if (item['attrInt0']!==null) {elattr.append("АтрибутЧисло0:"+item['attrInt0'])}
                elattr.append(elbr.cloneNode());
                if (item['attrInt1']!==null) {elattr.append("АтрибутЧисло1:"+item['attrInt1'])}
                elattr.append(elbr.cloneNode());
                if (item['attrInt2']!==null) {elattr.append("АтрибутЧисло2:"+item['attrInt2'])}
                elattr.append(elbr.cloneNode());
                if (item['attrInt3']!==null) {elattr.append("АтрибутЧисло3:"+item['attrInt3'])}
                elattr.append(elbr.cloneNode());
                if (item['attrInt4']!==null) {elattr.append("АтрибутЧисло4:"+item['attrInt4'])}

                HTMLitem.append(elattr);
                document.getElementById("tdiditem"+indexItem).append(HTMLitem);

            });
            //html-ending всех элементов каталога

            //let d1 = document.getElementById('idTable');
            //d1.insertAdjacentElement('beforeend', HTMLitems);


        } //end function viewCatalog



        -->

    </script>

</head>
<body>

    <div align="center" style=" padding-top: 30px">
        <table>
            <tr>
                <a href="#" onclick="f_go(1);return false;" class="stmenu">О компании</a>
            </tr>
            <tr>
                <a href="#" onclick="f_go(2);return false;" class="stmenu">Каталог</a>
            </tr>
            <tr>
                <a href="#" onclick="f_go(3);return false;" class="stmenu">Контакты</a>
            </tr>

        </table>
    </div>

    <div id="testsubpage" align="center" >
        <br>

    </div>

    <div id="subpage1" align="center">
        О нас
        Мы хорошие.
    </div>
    <div id="subpage2" style="display: none" align="center" >
        Каталог товаров


        <table id="idTable" align="center">


        </table>

        <table align="center" style="margin-top: 20px">
            <td>
                <tr align="left">
                    <a href="#" onclick="fpage_go('before','0');return false;" class="stmenu"><<</a>
                </tr>
                <tr align="center">
                    <a href="#" onclick="f_go(4);return false;" class="stmenu">Добавить в каталог</a>
                </tr>
                <tr align="right">
                    <a href="#" onclick="fpage_go('after','0');return false;" class="stmenu">>></a>
                </tr>
            </td>
        </table>




    </div>
    <div id="subpage3" style="display: none" align="center">
        Наши контактные данные: Тридевятое царство. Второй поворот направо.
    </div>

    <div id="subpage4" style="display: none" align="center">
        Форма для добавления в каталог
        <form ENCTYPE="multipart/form-data" name="form1" method="post"
              action='/catalog'>
            АтрибутСтр0 <input type="text" name="attr0" /><br />
            АтрибутСтр1 <input type="text" name="attr1" /><br />
            АтрибутСтр2 <input type="text" name="attr2" /><br />
            АтрибутСтр3 <input type="text" name="attr3" /><br />
            АтрибутСтр4 <input type="text" name="attr4" /><br />
            АтрибутЧисло0 <input type="text" name="attrInt0" /><br />
            АтрибутЧисло1 <input type="text" name="attrInt1" /><br />
            АтрибутЧисло2 <input type="text" name="attrInt2" /><br />
            АтрибутЧисло3 <input type="text" name="attrInt3" /><br />
            АтрибутЧисло4 <input type="text" name="attrInt4" /><br />
            Прикрепить файл: <input type="file" name="file1" /><br />
            <input name="" type="submit" value="Отправить" />
        </form>



    </div>




    <div align="center">

    </div>



</body>
</html>
<!--                      СВАЛКА ПРИМЕРОВ
//--------------------------------------------------------------

    <a href="#" onclick="requestCatalog();" class="stmenu">Запасной</a>

    <h3 id="demo" onclick="myFunction()">Click me to change my color.</h3>
    <script language="JavaScript" type="text/javascript">
        function myFunction() {
            document.getElementById("demo").style.color = "red";
        }
    </script>





           //    let response = await fetch(url);
            //    if (response.ok) {
            //        let json = await response.json();
            //    } else {
            //       alert("Ошибка HTTP: " + response.status);
            //    }


            //   fetch("Http://localhost:8080/catalog")
            //        .then(response => response.json())
            //        .then(jsonattrs => {
            //            jsonattrs.forEach(jsonattr => {
            //               const el = document.createElement('li');
            //                el.innerText = jsonattr.description;
            //              alert(jsonattr.description);
            //                document.querySelector('#idattrs').append(el);
            //            });
            //        });

            // строка JSON
            //var jsonstrExp = '{"attr0":"Название: Иван","attr1":"Цена: 26руб"}';

            // объект JavaScript
            //var jsonobjExp = {
            //    attr0: "Книга1",
            //    attr1: "25"
            //};

            //var items=JSON.parse(jsonstrExp);
            //var items=jsonobjExp;






//var d1 = document.getElementById('idTable');
//d1.insertAdjacentHTML('beforeend', '<tr><td >' + HTMLitems + '</td></tr>');

                //attrsHTML += jsonItems[attrkey] + '</br>';


//образцы
//const el = document.createElement('li');
//el.innerText =jsonattrs[itemkey];//jsonattr.description;
//document.querySelector('#idattrs').append(el);


//    }
//}
//jsonItems.description;
//document.querySelector('#idattrs').append(elTD);

//const elTR = document.createElement('tr');
//const elTD = document.createElement('td');

//for (itemkey in jsonItems) {
//    if (jsonItems.hasOwnProperty(itemkey)) {


////targetElement.insertAdjacentHTML(position, text);
// <div id="one">one</div>
//var d1 = document.getElementById('one');
//d1.insertAdjacentHTML('afterend', '<div id="two">two</div>');
//
//// At this point, the new structure is:
//// <div id="one">one</div><div id="two">two</div>
//}
Вот методы для различных вариантов вставки:

node.append(...nodes or strings) – добавляет узлы или строки в конец node,
node.prepend(...nodes or strings) – вставляет узлы или строки в начало node,
node.before(...nodes or strings) –- вставляет узлы или строки до node,
node.after(...nodes or strings) –- вставляет узлы или строки после node,
node.replaceWith(...nodes or strings) –- заменяет node заданными узлами или строками.

Если нужно вставить фрагмент HTML, то elem.insertAdjacentHTML(where, html) вставляет в зависимости от where:

"beforebegin" – вставляет html прямо перед elem,
"afterbegin" – вставляет html в elem в начало,
"beforeend" – вставляет html в elem в конец,
"afterend" – вставляет html сразу после elem.
Также существуют похожие методы elem.insertAdjacentText и elem.insertAdjacentElement, они вставляют текстовые строки и элементы, но они редко используются.



-->
